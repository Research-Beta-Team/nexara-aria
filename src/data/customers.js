// ─────────────────────────────────────────────
//  Customer Success — mock data
// ─────────────────────────────────────────────

export const CUSTOMERS = [
  {
    id: 'c1',
    name: 'TechVenture Inc',
    industry: 'Technology',
    plan: 'Growth',
    mrr: 4200,
    healthScore: 88,
    status: 'healthy',
    since: 'Sep 2024',
    renewalDate: '2025-09-15',
    owner: 'Alex',
    champion: { name: 'James Wu', title: 'VP Sales', email: 'james@techventure.io', linkedIn: '#' },
    npsScore: 52,
    lastActivity: '2 days ago',
    usageSignals: { loginFreq: 'Daily', featureAdoption: 'High', teamSize: 12 },
    churnRisk: { score: 12, reasons: [], daysToRenewal: 198 },
    expansionSignals: [],
    recentTouchpoints: [
      { type: 'Call', date: '2025-03-01', note: 'QBR — all green' },
      { type: 'Email', date: '2025-02-28', note: 'Sent usage report' },
    ],
    nextAction: 'Send Q2 roadmap preview',
    onboarding: { complete: true, totalSteps: 8, daysToValue: 14 },
  },
  {
    id: 'c2',
    name: 'MedScale Solutions',
    industry: 'Healthcare',
    plan: 'Scale',
    mrr: 6800,
    healthScore: 82,
    status: 'healthy',
    since: 'Nov 2024',
    renewalDate: '2025-11-20',
    owner: 'Jordan',
    champion: { name: 'Dr. Lisa Wong', title: 'Head of Clinical Ops', email: 'lisa@medscale.io', linkedIn: '#' },
    npsScore: 48,
    lastActivity: '1 day ago',
    usageSignals: { loginFreq: 'Daily', featureAdoption: 'High', teamSize: 24 },
    churnRisk: { score: 18, reasons: [], daysToRenewal: 264 },
    expansionSignals: [],
    recentTouchpoints: [
      { type: 'Meeting', date: '2025-03-02', note: 'Expansion discussion' },
      { type: 'Email', date: '2025-02-28', note: 'Pilot success summary' },
    ],
    nextAction: 'Follow up on expansion quote',
    onboarding: { complete: true, totalSteps: 8, daysToValue: 21 },
  },
  {
    id: 'c3',
    name: 'RetailMax',
    industry: 'Retail',
    plan: 'Starter',
    mrr: 1200,
    healthScore: 76,
    status: 'healthy',
    since: 'Jan 2025',
    renewalDate: '2025-07-01',
    owner: 'Sam',
    champion: { name: 'Patricia Moore', title: 'VP Merchandising', email: 'p.moore@retailmax.com', linkedIn: '#' },
    npsScore: 38,
    lastActivity: '3 days ago',
    usageSignals: { loginFreq: '3x/week', featureAdoption: 'Medium', teamSize: 6 },
    churnRisk: { score: 25, reasons: [], daysToRenewal: 122 },
    expansionSignals: [],
    recentTouchpoints: [
      { type: 'Email', date: '2025-02-27', note: 'Check-in' },
    ],
    nextAction: 'Share retail case study',
    onboarding: { complete: false, totalSteps: 8, completedSteps: 5, daysToValue: 21, blocker: 'Stuck on HubSpot integration', blockerDays: 6 },
  },
  {
    id: 'c4',
    name: 'Apex Corp',
    industry: 'Financial Services',
    plan: 'Growth',
    mrr: 5400,
    healthScore: 45,
    status: 'at_risk',
    since: 'Jun 2024',
    renewalDate: '2025-06-30',
    owner: 'Alex',
    champion: { name: 'Sarah Chen', title: 'Director of Ops', email: 's.chen@apexcorp.com', linkedIn: '#' },
    npsScore: 28,
    lastActivity: '5 days ago',
    usageSignals: { loginFreq: '1x/week', featureAdoption: 'Low', teamSize: 8 },
    churnRisk: {
      score: 72,
      reasons: ['Champion contact left the company', 'No login in 5 days'],
      daysToRenewal: 121,
    },
    expansionSignals: [],
    recentTouchpoints: [
      { type: 'Email', date: '2025-02-25', note: 'Champion left — intro to new contact' },
    ],
    nextAction: 'Schedule intro call with new champion',
    onboarding: { complete: true, totalSteps: 8, daysToValue: 28 },
  },
  {
    id: 'c5',
    name: 'Delta Textiles',
    industry: 'Manufacturing',
    plan: 'Growth',
    mrr: 3800,
    healthScore: 38,
    status: 'at_risk',
    since: 'Aug 2024',
    renewalDate: '2025-08-15',
    owner: 'Jordan',
    champion: { name: 'Mike Torres', title: 'VP Operations', email: 'm.torres@deltatextiles.com', linkedIn: '#' },
    npsScore: 22,
    lastActivity: '12 days ago',
    usageSignals: { loginFreq: 'Rare', featureAdoption: 'Low', teamSize: 5 },
    churnRisk: {
      score: 85,
      reasons: ['Login frequency dropped 60% in last 2 weeks', 'No response to last 2 emails'],
      daysToRenewal: 167,
    },
    expansionSignals: [],
    recentTouchpoints: [
      { type: 'Email', date: '2025-02-19', note: 'No reply' },
      { type: 'Call', date: '2025-02-15', note: 'Voicemail' },
    ],
    nextAction: 'Escalate — schedule executive call',
    onboarding: { complete: true, totalSteps: 8, daysToValue: 25 },
  },
  {
    id: 'c6',
    name: 'Nexus Finance',
    industry: 'Financial Services',
    plan: 'Starter',
    mrr: 900,
    healthScore: 28,
    status: 'churning',
    since: 'Oct 2024',
    renewalDate: '2025-04-01',
    owner: 'Sam',
    champion: { name: 'David Park', title: 'VP Finance', email: 'd.park@nexusfinance.com', linkedIn: '#' },
    npsScore: 15,
    lastActivity: '18 days ago',
    usageSignals: { loginFreq: 'Rare', featureAdoption: 'Very low', teamSize: 3 },
    churnRisk: {
      score: 92,
      reasons: ['Champion unresponsive', 'Usage near zero', 'Contract up in 30 days'],
      daysToRenewal: 31,
    },
    expansionSignals: [],
    recentTouchpoints: [
      { type: 'Email', date: '2025-02-12', note: 'Renewal reminder — no reply' },
    ],
    nextAction: 'Last-ditch save call',
    onboarding: { complete: true, totalSteps: 6, daysToValue: 20 },
  },
  {
    id: 'c7',
    name: 'CloudNine Software',
    industry: 'Technology',
    plan: 'Growth',
    mrr: 3200,
    healthScore: 90,
    status: 'expanding',
    since: 'Jul 2024',
    renewalDate: '2025-07-15',
    owner: 'Alex',
    champion: { name: 'Chris Adams', title: 'Head of Sales', email: 'chris@cloudnine.io', linkedIn: '#' },
    npsScore: 58,
    lastActivity: 'Today',
    usageSignals: { loginFreq: 'Daily', featureAdoption: 'High', teamSize: 18 },
    churnRisk: { score: 5, reasons: [], daysToRenewal: 136 },
    expansionSignals: ['Team grew 40% in 90 days', 'Asking about Scale features'],
    recentTouchpoints: [
      { type: 'Call', date: '2025-03-03', note: 'Expansion interest — Scale plan' },
    ],
    nextAction: 'Send Scale proposal',
    onboarding: { complete: true, totalSteps: 8, daysToValue: 12 },
  },
  {
    id: 'c8',
    name: 'DataVault Security',
    industry: 'Technology',
    plan: 'Starter',
    mrr: 1500,
    healthScore: 84,
    status: 'expanding',
    since: 'Dec 2024',
    renewalDate: '2025-12-01',
    owner: 'Jordan',
    champion: { name: 'Anna Kumar', title: 'CISO', email: 'anna@datavault.io', linkedIn: '#' },
    npsScore: 50,
    lastActivity: '1 day ago',
    usageSignals: { loginFreq: 'Daily', featureAdoption: 'High', teamSize: 8 },
    churnRisk: { score: 10, reasons: [], daysToRenewal: 275 },
    expansionSignals: ['Requested multi-seat quote', 'Usage 2x plan limit'],
    recentTouchpoints: [
      { type: 'Meeting', date: '2025-03-02', note: 'Growth plan discussion' },
    ],
    nextAction: 'Send Growth plan proposal',
    onboarding: { complete: true, totalSteps: 6, daysToValue: 10 },
  },
];

export const CHURN_RISK_ALERTS = [
  { id: 'a1', customerName: 'Apex Corp', message: 'Champion contact left the company (3 days ago)' },
  { id: 'a2', customerName: 'Delta Textiles', message: 'Login frequency dropped 60% in last 2 weeks' },
  { id: 'a3', customerName: 'Nexus Finance', message: 'No response to last 3 emails — renewal in 30 days' },
  { id: 'a4', customerName: 'Delta Textiles', message: 'NPS dropped 20 points in 60 days' },
  { id: 'a5', customerName: 'Nexus Finance', message: 'Usage near zero — at-risk of churn' },
];

// Derived stats
export function getCustomerStats(customers = CUSTOMERS) {
  const current = customers.filter((c) => c.status !== 'churning');
  const mrr = current.reduce((s, c) => s + (c.mrr || 0), 0);
  const atRiskCount = current.filter((c) => c.status === 'at_risk').length;
  const expandingCount = current.filter((c) => c.status === 'expanding').length;
  const churnRiskCount = current.filter((c) => c.status === 'at_risk' || c.status === 'churning').length;
  const avgHealth = current.length ? Math.round(current.reduce((s, c) => s + (c.healthScore || 0), 0) / current.length) : 0;
  const npsScores = current.map((c) => c.npsScore).filter((n) => n != null);
  const avgNps = npsScores.length ? Math.round(npsScores.reduce((a, b) => a + b, 0) / npsScores.length) : 0;
  return { mrr, customerCount: current.length, churnRiskCount, atRiskCount, expandingCount, avgHealth, avgNps };
}
